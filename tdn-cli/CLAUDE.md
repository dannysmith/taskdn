# Claude Instructions for tdn-cli

See the parent `../CLAUDE.md` for general project instructions.

High-level documentation (requirements, technical overview) lives in `../docs/product-overviews/cli/`.

## Overview

This is the CLI tool for Taskdn - a hybrid TypeScript + Rust project:
- **TypeScript layer** (Bun): CLI interface, prompts, output formatting
- **Rust core** (NAPI-RS): Performance-critical operations (parsing, search)

## Key Commands

```bash
bun run check        # Run all checks (TS + Rust)
bun run fix          # Run all formatters (Prettier + cargo fmt)
bun run build        # Build release NAPI bindings
bun run build:dev    # Build debug NAPI bindings
bun run test         # Run all tests (TS + Rust)
```

## Developer Docs

- `docs/developer/architecture-guide.md` - Architecture and patterns (read this first)
- `docs/developer/testing.md` - Testing strategy

## Path Aliases

Use these aliases in TypeScript imports (configured in tsconfig.json):

- `@/*` - maps to `src/*` (e.g., `import { foo } from '@/commands/list'`)
- `@bindings` - maps to `bindings/` (e.g., `import { parseTask } from '@bindings'`)

## Project-Specific Notes

- The `bindings/` directory is auto-generated by NAPI-RS - never edit manually
- Use `bun` (not pnpm/npm) for all JS/TS operations
- Rust code lives in `crates/core/` and exposes functions via `#[napi]` macro
- TypeScript types for Rust functions are auto-generated in `bindings/index.d.ts`

## Workflow Notes

**Regenerating bindings after Rust API changes:** If you modify any `#[napi]` function signatures, structs, or enums in the Rust code, you must regenerate the TypeScript bindings:

```bash
bun run build        # Regenerates bindings/index.js and bindings/index.d.ts
```

The TypeScript layer won't see your changes until you rebuild.

**Format before check:** When you've edited more than a few TypeScript or Rust files, run `bun run fix` before `bun run check`. This avoids formatting errors failing the check.
